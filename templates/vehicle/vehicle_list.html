{% extends "dashboard/dasboard_base.html" %} 
{% load crispy_forms_tags %}


{% block dashboard_section %}
<div>
  <!-- Create vehicle modal -->
  <div id="add-vehicle-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Create a Vehicle</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <form action="" method='post'>
            {% csrf_token %} 
            {{ creat_vehicle_form | crispy }}
            <button class="button has-background-primary has-text-white" type="submit">Create Vehicle</button>
        </form>
      </section>
    </div>
  </div>

  <!-- Delete vehicle modal -->
  <div id="delete-vehicle-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Delete a Vehicle</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body">
        <form action="" method='post'>
            {% csrf_token %} 
            {{ creat_vehicle_form | crispy }}
            <button class="button has-background-primary has-text-white" type="submit">Create Vehicle</button>
        </form>
      </section>
    </div>
  </div>

  <div class="section">
    <div class="container">
      <div>
        <button
          class="button mb-3 has-background-primary has-text-white js-modal-trigger"
          data-target="add-vehicle-modal"
        >
          Create Vehicle
        </button>
      </div>

      <div class="columns is-multiline">
        {% for vehicle in vehicles %}
        <div class="column is-3">
          <div class="card">
            <div class="card-image">
              <figure class="image is-4by3">
                <img
                  src="https://bulma.io/images/placeholders/1280x960.png"
                  alt="Placeholder image"
                />
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-left">
                  <figure class="image is-48x48">
                    <img
                      src="https://bulma.io/images/placeholders/96x96.png"
                      alt="Placeholder image"
                    />
                  </figure>
                </div>
                <div class="media-content">
                  <p class="title is-4">{{vehicle.number_plate}}</p>
                  {% if vehicle.nick_name %}
                  <p class="subtitle is-6">{{vehicle.nick_name}}</p>
                  {% endif %}
                </div>
              </div>
            </div>
            <footer class="card-footer p-1">
              <a href="#" class="card-footer-item">Edit</a>
              <a href="{% url 'vehicle_app:delete_vehicle_url' vehicle.id %}" class="card-footer-item">Delete</a>
              {% comment %} <button
              class="button card-footer-item js-modal-trigger"
              data-target="delete-vehicle-modal"
              >
               Delete
              </button> {% endcomment %}
            </footer>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock dashboard_section %}
